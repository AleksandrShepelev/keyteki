describe('Anomaly Exploiter', function() {
    integration(function() {
        describe('When triggered', function() {
            beforeEach(function() {
                this.setupTest({
                    player1: {
                        house: 'logos',
                        inPlay: ['anomaly-exploiter', 'ember-imp', 'guardian-demon', 'the-terror']
                    },
                    player2: {
                        inPlay: ['mighty-tiger', 'snufflegator', 'inka-the-spider']
                    }
                });

                this.mightyTiger.tokens.damage = 2;
                this.guardianDemon.tokens.damage = 1;

                this.player1.useAction(this.anomalyExploiter);
            });

            it('should offer to destroy damaged creatures', function() {
                expect(this.player1).toBeAbleToSelect(this.guardianDemon);
                expect(this.player1).toBeAbleToSelect(this.mightyTiger);
            });

            it('should not offer undamaged creatures', function() {
                expect(this.player1).not.toBeAbleToSelect(this.theTerror);
                expect(this.player1).not.toBeAbleToSelect(this.snufflegator);
            });

            describe('and a creature is selected', function() {
                beforeEach(function() {
                    this.player1.clickCard(this.mightyTiger);
                });

                it('should destroy the chosen creature', function() {
                    expect(this.mightyTiger.location).toBe('discard');
                });
            });
        });
    });
});
